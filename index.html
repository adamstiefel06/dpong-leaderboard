<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DPONG Leaderboard</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      display: flex;
      justify-content: center;
      padding: 40px;
    }

    .container {
      width: 420px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #1c1c1c;
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      padding: 10px;
      text-align: left;
    }

    th {
      background: #222;
      font-weight: bold;
    }

    tr:nth-child(even) {
      background: #181818;
    }

    .rank {
      width: 40px;
      color: #aaa;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>üèì DPONG Leaderboard</h1>

    <table>
      <thead>
        <tr>
          <th class="rank">#</th>
          <th>Player</th>
          <th>Rating</th>
        </tr>
      </thead>
      <tbody id="leaderboard"></tbody>
    </table>
  </div>

<script>
  const csvURL =
    "https://script.google.com/macros/s/AKfycbxFejFhfUe8xmSspdHGD31fsZHjMNgqVVplg1m6eTsNpVOmpHTqoDizIOg9EZUcmmvptg/exec"; // Apps Script /exec link

  fetch(csvURL + "?t=" + Date.now())
    .then(res => {
      if (!res.ok) throw new Error("HTTP " + res.status);
      return res.text();
    })
    .then(csv => {
      const tbody = document.getElementById("leaderboard");
      tbody.innerHTML = "";

      const rows = csv
        .replace(/\r/g, "")
        .trim()
        .split("\n")
        .slice(1) // remove header row
        .map(r => r.split(",").slice(0, 9)); // ONLY columns A‚ÄìI

      const players = rows
        .map(r => ({
          name: r[0]?.trim(),
          dpr: Number(r[1]),
          ovr: r[2],
          games: r[3],
          wins: r[4],
          losses: r[5],
          diff: r[6],
          winpct: r[7],
          margin: r[8]
        }))
        .filter(p => p.name && Number.isFinite(p.dpr))
        .sort((a, b) => b.dpr - a.dpr);

      if (players.length === 0) {
        tbody.innerHTML =
          `<tr><td colspan="9">No leaderboard data found.</td></tr>`;
        return;
      }

      players.forEach((p, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="rank">${i + 1}</td>
          <td>${p.name}</td>
          <td>${p.dpr.toFixed(1)}</td>
          <td>${p.ovr}</td>
          <td>${p.games}</td>
          <td>${p.wins}</td>
          <td>${p.losses}</td>
          <td>${p.winpct}</td>
          <td>${p.margin}</td>
        `;
        tbody.appendChild(tr);
      });
    })
    .catch(err => {
      console.error(err);
      document.getElementById("leaderboard").innerHTML =
        `<tr><td colspan="9">Error loading leaderboard: ${err.message}</td></tr>`;
    });
</script>



</body>
</html>



